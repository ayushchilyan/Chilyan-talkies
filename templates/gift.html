<!DOCTYPE html>
<html>
<head>
    <title>Birthday Gift 🎂</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <!-- Confetti library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

</head>
<style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #4adfb7;
        }
        h1 {
            color: #db0303;
        }
        h2 {
            color: #05033e;
        }
    </style>
<body>
    <header>
        <h1>Happy Birthday  {{ username }}  Mam 🙏🎂🍫🎈🎇, </h1>
        <a href="{{ url_for('logout') }}">Logout</a>
    </header>

    <section>
        <h2>Photos</h2>
        <div class="grid">
            {% for p in photos %}
                <figure>
                    <img src="{{ p.src }}" alt="{{ p.caption }}">
                    <figcaption>{{ p.caption }}</figcaption>
                </figure>
            {% endfor %}
        </div>
    </section>

    <section>
        <h2>Videos</h2>
        {% for v in videos %}
            <video controls poster="{{ v.poster }}" width="400">
                <source src="{{ v.src }}" type="video/mp4">
            </video>
            <p>{{ v.title }}</p>
        {% endfor %}
    </section>

    <section>
        <h2>Music</h2>
        {% for a in audios %}
            <p>{{ a.title }}</p>
            <audio controls>
                <source src="{{ a.src }}">
            </audio>
        {% endfor %}
    </section>

    <section>
        <h2>Downloads</h2>
        {% for d in downloads %}
            <a href="{{ d.href }}" download>{{ d.label }}</a>
        {% endfor %}
    </section>

    <footer>
        <p>{{ note }}</p>
    </footer>

<script>
// Confetti function
function launchConfetti() {
    var duration = 5 * 1000;
    var animationEnd = Date.now() + duration;
    var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 999 };

    function randomInRange(min, max) {
        return Math.random() * (max - min) + min;
    }

    var interval = setInterval(function() {
        var timeLeft = animationEnd - Date.now();

        if (timeLeft <= 0) {
            return clearInterval(interval);
        }

        var particleCount = 50 * (timeLeft / duration);
        confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
        confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
    }, 250);
}

// Balloons
function launchBalloons() {
    for (let i = 0; i < 10; i++) {
        let balloon = document.createElement("div");
        balloon.className = "balloon";
        balloon.style.left = Math.random() * 100 + "vw";
        balloon.style.animationDelay = Math.random() * 5 + "s";
        document.body.appendChild(balloon);
        setTimeout(() => balloon.remove(), 8000);
    }
}

// Start both on page load
window.onload = function() {
    launchConfetti();
    launchBalloons();
};
</script>

</body>
</html>
